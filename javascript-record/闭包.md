<h1>闭包</h1>
<p><b>闭包</b>：是指有权访问另外一个函数作用域中的变量的函。.创建闭包的常见方式就是在一个函数内部创建另外一个函数。</p>
<p>在javascript中没有块级作用域，一般为了给某个函数申明一些只有该函数才能使用的局部变量时，我们就会用到闭包，这样我们可以很大程度上减少全局作用域中的变量，净化全局作用域。</p>
<p>使用闭包有如上的好处，当然这样的好处是需要付出代价的，代价就是内存的占用</p>
<p>如何理解上面的那句话呢？</p>
<p>每个函数的执行，都会创建一个与该函数相关的函数执行环境，或者说是函数执行上下文。这个执行上下文中有一个属性 scope chain（作用域链指针），这个指针指向一个作用域链结构，作用域链中的指针又都指向各个作用域对应的活动对象。正常情况，一个函数在调用开始执行时创建这个函数执行上下文及相应的作用域链，在函数执行结束后释放函数执行上下文及相应作用域链所占的空间。</p>

<h3>例如</h3>
<pre>
//声明函数
function test() {
  var str = "hello world";
  console.log(str);
}

//调用函数
test();
</pre>
<p>在调用函数的时候会在内存中生成如下图的结构：</p>
<img src="img/3.png"/>
<p>但是闭包的情况就有点特殊了，由于闭包函数可以访问外层函数中的变量，所以外层函数在执行结束后，其作用域活动对象并不会被释放（注意，外层函数执行结束后执行环境和对应的作用域链就会被销毁），而是被闭包函数的作用域链所引用，直到闭包函数被销毁后，外层函数的作用域活动对象才会被销毁。这也正是闭包要占用内存的原因。</p>
<p>所以使用闭包有好处，也有坏处，滥用闭包会造成内存的大量消耗。</p>

<p>使用闭包还有其他的副作用，可以说是bug，也可以说不是，相对不同的业务可能就会有不同的看法。</p>

<h3>这个副作用是闭包函数只能取到外层函数变量的最终值。</h3>




